<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= producto ? 'Editar' : 'Nuevo' %> Producto</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="/css/admin-style.css">
</head>
<body class="form-wrapper"> <div class="form-card"> <div class="form-header">
            <h2 class="form-title">
                <%= producto ? 'EDITAR PRODUCTO' : 'AGREGAR PRODUCTO' %>
            </h2>
            <a href="/admin/dashboard" style="color: #999; font-size: 1.2rem;">
                <i class="fas fa-times"></i>
            </a>
        </div>

        <form action="/admin/<%= producto ? 'editar/' + producto.id : 'agregar' %>" method="POST" enctype="multipart/form-data">
            
            <div class="form-grid">
                <div class="form-group full-width">
                    <label>Nombre del Producto</label>
                    <input type="text" name="nombre" class="form-control" required 
                           value="<%= producto ? producto.nombre : '' %>" placeholder="Ej: Camiseta Titular...">
                </div>

                <div class="form-group">
                    <label>Categor√≠a</label>
                    <select name="categoria" class="form-control" required>
                        <option value="Camisetas" <%= (producto && producto.categoria === 'Camisetas') ? 'selected' : '' %>>Camisetas</option>
                        <option value="Accesorios" <%= (producto && producto.categoria === 'Accesorios') ? 'selected' : '' %>>Accesorios</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Precio (USD)</label>
                    <input type="number" name="precio" step="0.01" class="form-control" required 
                           value="<%= producto ? producto.precio : '' %>" placeholder="0.00">
                </div>

                <div class="form-group full-width">
                    <label>Imagen</label>
                    <input type="file" name="imagen" class="form-control" accept="image/*" <%= producto ? '' : 'required' %>>
                    
                    <% if (producto && producto.imagen) { %>
                        <div class="image-preview">
                            <p style="font-size:0.8rem; color:#888; margin-bottom:5px;">Actual:</p>
                            <% let src = producto.imagen.startsWith('http') ? producto.imagen : '/uploads/' + producto.imagen; %>
                            <img src="<%= src %>">
                        </div>
                    <% } %>
                </div>
            </div>

            <div class="form-actions">
                <a href="/admin/dashboard" class="btn-cancel">Cancelar</a>
                <button type="submit" class="btn-save">
                    <%= producto ? 'Guardar Cambios' : 'Crear Producto' %>
                </button>
            </div>

        </form>
    </div>

</body>
</html>